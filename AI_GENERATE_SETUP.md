# AI 生图功能配置说明

## 问题说明

当前遇到的错误：`当前配置的模型不支持图片生成`

**原因**：代码中使用的模型端点 `ep-20251020231728-jbdzj` 对应的是文本生成模型 `doubao-seed-1-6-lite-251015`，该模型不支持图片生成功能。

## 解决方案

### 方法一：创建图片生成推理接入点（推荐）

1. **登录火山引擎控制台**
   - 访问：https://console.volcengine.com/ark

2. **创建推理接入点**
   - 进入"推理"页面
   - 点击"创建推理接入点"
   - 选择支持**图片生成**的模型，例如：
     - `doubao-diffusion` (豆包图像生成模型)
     - 或其他支持图片生成的模型

3. **获取推理接入点 ID**
   - 创建完成后，会得到一个推理接入点 ID，格式类似：`ep-xxxxxxxxxxxxxxxx`
   - 复制这个 ID

4. **更新代码**
   - 打开文件：`app/api/generate/route.ts`
   - 找到第 32 行的 `model` 参数
   - 将 `ep-20251020231728-jbdzj` 替换为你的新推理接入点 ID

```typescript
// 修改前
body: JSON.stringify({
  model: "ep-20251020231728-jbdzj",  // ❌ 文本生成模型
  // ...
}),

// 修改后
body: JSON.stringify({
  model: "ep-你的图片生成接入点ID",  // ✅ 图片生成模型
  // ...
}),
```

### 方法二：使用火山引擎官方文档推荐的模型

如果火山引擎提供了公共的图片生成模型，可以查看官方文档：
- API 文档：https://www.volcengine.com/docs/82379/1298454
- 查找支持图片生成的模型名称

### 验证配置

配置完成后：
1. 重启开发服务器（如果需要）
2. 访问 http://localhost:3000/generate
3. 输入提示词测试生图功能

## 当前配置信息

- **API 端点**：`https://ark.cn-beijing.volces.com/api/v3/images/generations`
- **当前模型**：`ep-20251020231728-jbdzj` (实际映射到 `doubao-seed-1-6-lite-251015`)
- **API Key**：已在 `.env.local` 中配置
- **支持的图片尺寸**：1K / 2K / 4K

## 需要帮助？

如果遇到问题，请检查：
1. ✅ 推理接入点是否支持图片生成
2. ✅ API Key 是否正确
3. ✅ 火山引擎账户是否有足够的额度
4. ✅ 网络连接是否正常

查看服务端日志可以获取更详细的错误信息。
